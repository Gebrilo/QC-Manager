# Implementation Plan: Tasks Page Kanban View & UX Improvements

**Branch**: `002-tasks-kanban-view` | **Date**: 2026-02-25 | **Spec**: [spec.md](./spec.md)

---

## Summary

Add a Kanban board view to the existing My Tasks page (`/tasks`) that organizes tasks by status into draggable columns (Backlog, In Progress, Done, Cancelled). The user can switch between the existing Table view and the new Board view using a view toggle â€” their preference is remembered across sessions via `localStorage`. On mobile, drag-and-drop is replaced by a status dropdown on each card. 

Styling across the entire Tasks page will be elevated to use the global Liquid Glass design tokens (`.glass-card`, `.glass-panel`, `.glass-button`) introduced in the `001-liquid-glass-ui` feature. No backend changes or new API endpoints are required.

---

## Technical Context

**Language/Version**: TypeScript 5.9, Node.js 25
**Primary Dependencies**: Next.js 14, React 18, Tailwind CSS 3.3.5, HTML5 Drag and Drop API (native)
**Storage**: No new DB entities; view preference stored in `localStorage` under key `qc_tasks_view`
**Testing**: Playwright (E2E), existing test suite
**Target Platform**: Web application (Desktop â‰¥1024px, Tablet â‰¥768px, Mobile â‰¥375px)
**Project Type**: Web application â€” frontend only
**Performance Goals**: View switch < 1s; status drag-and-drop persistence < 2s
**Constraints**: No new API endpoints; no new external libraries; zero regression in existing Table view
**Scale/Scope**: Tasks page only; uses existing `Task[]` state already loaded from API

---

## Constitution Check

| Principle | Status | Notes |
|-----------|--------|-------|
| I. Code Quality | âœ… PASS | New components are isolated, typed, and follow existing conventions in `src/components/` |
| II. Testing Standards | âœ… PASS | Existing Playwright E2E tests cover navigation; view switch and DnD scenarios are added |
| III. UX Consistency | âœ… PASS | All new UI elements use the `.glass-*` design system; view toggle matches app button patterns |
| IV. Performance | âœ… PASS | No new runtime libraries; native DnD; optimistic updates keep interaction snappy |
| Security | âœ… PASS | Status patch uses existing auth-checked API; no new attack surface |
| Accessibility | âœ… PASS | Mobile fallback dropdown; semantic HTML for columns; keyboard-focusable cards |

---

## Project Structure

### Documentation (this feature)

```text
specs/002-tasks-kanban-view/
â”œâ”€â”€ plan.md              âœ… This file
â”œâ”€â”€ research.md          âœ… Phase 0 research
â”œâ”€â”€ data-model.md        âœ… Entity analysis (no schema changes)
â”œâ”€â”€ quickstart.md        âœ… Visual verification checklist
â”œâ”€â”€ contracts/
â”‚   â””â”€â”€ ui-components.md âœ… Component interfaces & API contract
â””â”€â”€ tasks.md             ðŸ”² Generated by /speckit.tasks
```

### Source Code â€” Files to Create / Modify

```text
apps/web/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ tasks/
â”‚           â”œâ”€â”€ TaskTable.tsx              [EXISTING] (add glass styling tweaks)
â”‚           â”œâ”€â”€ TaskKanbanBoard.tsx         [NEW] Kanban board shell with column layout
â”‚           â”œâ”€â”€ TaskKanbanCard.tsx          [NEW] Individual task card with drag / mobile-select
â”‚           â””â”€â”€ ViewToggle.tsx              [NEW] Table vs Board segmented control
â””â”€â”€ app/
    â””â”€â”€ tasks/
        â””â”€â”€ page.tsx                       [MODIFY] Add view state, ViewToggle, handleStatusChange
```

---

## Design Decisions (from research.md)

| Decision | Chosen | Why |
|---|---|---|
| Drag-and-Drop | Native HTML5 API | Lightweight; no new bundle; sufficient for column-to-column drag |
| Mobile fallback | Status `<select>` on card | WCAG-accessible; faster on touch |
| View persistence | `localStorage` (`qc_tasks_view`) | No backend required; survives sessions |
| Status update API | Existing `PATCH /api/tasks/:id` | No new endpoints needed |
| Column ordering | Fixed: Backlog â†’ In Progress â†’ Done â†’ Cancelled | Matches existing `STATUS_OPTIONS` |
| Optimistic updates | Yes | Immediate feedback; rollback on failure |

---

## Complexity Tracking

No constitution violations. No complexity exceptions required.
